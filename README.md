# Управление светодиодами и ввод данных на ATmega

Программа реализует управление светодиодами и обработку внешних сигналов на микроконтроллере ATmega с использованием языка Assembler. Программа выполняет следующие основные функции:

1. Управление портами ввода-вывода для работы с кнопками и светодиодами.
2. Обработка внешних прерываний INT0 и INT1.
3. Хранение данных в EEPROM.
4. Реализация циклического сдвига данных для управления светодиодами.
5. Обработка пользовательского ввода с помощью кнопок.

## Основные функции

### Инициализация
- Настройка начальных значений регистров.
- Конфигурация портов ввода-вывода:
  - `PORTA` и `PORTB` используются для управления светодиодами.
  - `PORTC` обрабатывает ввод с кнопок.
  - `PORTD` работает как управляющий порт для дополнительных функций.

### Обработка прерываний
- **INT0**: Изменяет направление сдвига светодиодов.
- **INT1**: Управляет скоростью анимации и сохраняет значение в EEPROM.

### Работа с EEPROM
- Чтение и запись данных из/в EEPROM для сохранения параметров между перезагрузками.

### Основной цикл программы
- Циклический вывод данных на светодиоды.
- Реализация задержки для управления скоростью анимации.
- Считывание пользовательского ввода и обработка кнопок.

### Функции управления
- **Сдвиг влево и вправо**: Управление положением светодиодного узора с помощью циклических сдвигов.
- **Обработка пользовательского ввода**: Реакция на нажатие кнопок для изменения параметров.

## Как использовать

1. Загрузите программу в микроконтроллер ATmega.
2. Подключите кнопки к `PORTC` и светодиоды к `PORTA` и `PORTB`.
3. Используйте кнопки для управления:
   - Изменение скорости с помощью прерывания INT1.
   - Изменение направления сдвига с помощью прерывания INT0.
4. После включения программа автоматически восстановит последний сохранённый параметр скорости из EEPROM.

## Детали реализации

### Регистры
- **TMP**: Временный регистр для операций.
- **_X, _Y, _Z**: Регистры для хранения текущих значений положения и параметров анимации.
- **INVERT_Y**: Инвертированное значение `_Y` для управления противоположным портом.

### Прерывания
- **INT0_HANDLER**: Увеличивает значение `_X` и изменяет направление сдвига.
- **INT1_HANDLER**: Увеличивает значение `_Z`, контролируя скорость, и сохраняет его в EEPROM.

### Порты
- **PORTA и PORTB**: Управление светодиодами.
- **PORTC**: Обработка кнопок.
- **PORTD**: Управляющий порт для дополнительных функций.

### EEPROM
- Хранит параметры скорости (`_Z`), чтобы сохранить их между запусками.

## Требования

- Микроконтроллер: ATmega
- Компилятор: AVR Assembler
- Среда разработки: Atmel Studio или любая другая подходящая.

## Сборка и загрузка
1. Скомпилируйте исходный код с помощью AVR Assembler.
2. Загрузите прошивку в микроконтроллер с использованием программатора ISP.

## Примечания
- Убедитесь, что порты подключения соответствуют настройкам программы.
- Для работы с EEPROM используйте блоки памяти, указанные в программе.
- Программа включает функции для предотвращения зацикливания кнопок при их удерживании.
